<p-dialog
  [header]="headerTitle"
  [(visible)]="isVisible"
  [modal]="modal"
  [closable]="closable"
  [draggable]="draggable"
  [style]="{
    width: width + 'vw',
    height: height + 'vw'
  }"
  (visibleChange)="isVisibleChange.emit($event)"
>
  <isy-stepper #stepper [items]="wizardItems" [index]="index"> </isy-stepper>

  <ng-container [ngTemplateOutlet]="this.content!.get(stepper.index)!.templateRef"></ng-container>

  <ng-template pTemplate="footer">
    <div class="flex justify-content-end flex-wrap card-container">
      @if (!isSaved) {
        <button
          id="back-button"
          pButton
          [class]="'flex align-items-center justify-content-center mr-2'"
          [disabled]="stepper.index === 0"
          (click)="move(false)"
        >
          {{ labelBackButton }}
        </button>

        <button
          id="next-button"
          pButton
          [class]="'flex align-items-center justify-content-center mr-4'"
          [disabled]="stepper.index === wizardItems.length - 1 || !allowNext"
          (click)="move(true)"
        >
          {{ labelNextButton }}
        </button>
      }

      @if (stepper.index === wizardItems.length - 1 && !isSaved) {
        <button
          id="save-button"
          pButton
          [class]="'flex align-items-center justify-content-center'"
          [disabled]="(stepper.index !== wizardItems.length - 1 || !allowNext) && !isSaved"
          (click)="save(true)"
        >
          {{ labelSaveButton }}
        </button>
      }

      <button
        id="close-button"
        pButton
        [class]="'flex align-items-center justify-content-center'"
        [disabled]="isSaved && !closable"
        (click)="closeDialog()"
      >
        {{ labelCloseButton }}
      </button>
    </div>
  </ng-template>
</p-dialog>
