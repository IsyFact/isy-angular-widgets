<p-panel styleClass="isy-demo-app-result-panel" [header]="ergebnisliste" [toggleable]="true"
         iconPos="start">
  <p-table #dt1
           [value]="personen"
           [globalFilterFields]="['name','representative.name','status']"
           selectionMode="single"
           [(selection)]="selectedObject"
  >
    <ng-template pTemplate="caption">
      <p-button i18n-label label="Objekt anlegen"
                class="mr-1"
                icon="pi pi-plus"
                (onClick)="emitCreateAction()">
      </p-button>
      <p-button i18n-label label="Objekt bearbeiten"
                icon="pi pi-pencil"
                [disabled]="!selectedObject"
                (onClick)="emitEditAction(selectedObject)">
      </p-button>
    </ng-template>
    <ng-template pTemplate="header">
      <tr>
        <th scope="col" pSortableColumn="personalien.nachname" i18n>Nachname
          <p-columnFilter type="text" field="personalien.nachname" display="menu"></p-columnFilter>
          <p-sortIcon field="personalien.nachname"></p-sortIcon>
        </th>
        <th scope="col" pSortableColumn="personalien.vorname" i18n>Vorname
          <p-columnFilter type="text" field="personalien.nachname" display="menu"></p-columnFilter>
          <p-sortIcon field="personalien.vorname"></p-sortIcon>
        </th>
        <th scope="col" pSortableColumn="personalien.geschlecht">
          <p i18n>Geschlecht</p>
          <p-columnFilter field="representative"
                          matchMode="in"
                          display="menu"
                          [showMatchModes]="false"
                          [showOperator]="false"
                          [showAddButton]="false">
            <ng-template pTemplate="header">
              <div class="p-px-3 p-pt-3 p-pb-0">
                <span class="p-text-bold" i18n>Agent Picker</span>
              </div>
            </ng-template>
            <ng-template pTemplate="filter" let-value let-filter="filterCallback">
              <p-multiSelect optionLabel="option"
                             i18n-placeholder
                             placeholder="Alle"
                             [ngModel]="value"
                             [options]="geschlechter"
                             (onChange)="filter($event.value)"
              >
                <ng-template let-option pTemplate="item">
                  <div class="p-multiselect-representative-option">
                    <span class="p-ml-1">{{option}}</span>
                  </div>
                </ng-template>
              </p-multiSelect>
            </ng-template>
          </p-columnFilter>
          <p-sortIcon field="personalien.geschlecht"></p-sortIcon>
        </th>
        <th scope="col" pSortableColumn="personalien.geburtsname" i18n>Geburtsname
          <p-columnFilter type="text" field="personalien.nachname" display="menu"></p-columnFilter>
          <p-sortIcon field="personalien.geburtsname"></p-sortIcon>
        </th>
        <th scope="col" pSortableColumn="personalien.geburtsort" i18n>Geburtsort
          <p-columnFilter type="text" field="personalien.nachname" display="menu"></p-columnFilter>
          <p-sortIcon field="personalien.geburtsort"></p-sortIcon>
        </th>
        <th scope="col" pSortableColumn="personalien.staatsangehoerigkeit" i18n>Saatsangeh√∂rigkeit
          <p-columnFilter type="text" field="personalien.nachname" display="menu"></p-columnFilter>
          <p-sortIcon field="personalien.staatsangehoerigkeit"></p-sortIcon>
        </th>
        <th scope="col" pSortableColumn="personalien.geburtsdatum" i18n>Geburtsdatum
          <p-columnFilter type="date" field="personalien.geburtsdatum" display="menu"></p-columnFilter>
          <p-sortIcon field="personalien.geburtsdatum"></p-sortIcon>
        </th>
        <th scope="col" i18n>
          Aktionen
        </th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-rowData let-person>
      <tr [pSelectableRow]="rowData">
        <td>{{person.personalien.nachname}}</td>
        <td>{{person.personalien.vorname}}</td>
        <td>{{person.personalien.geschlecht}}</td>
        <td>{{person.personalien.geburtsname}}</td>
        <td>{{person.personalien.geburtsort}}</td>
        <td>{{person.personalien.staatsangehoerigkeit}}</td>
        <td>{{person.personalien.geburtsdatum}}</td>
        <td>
          <p-button [icon]="'pi pi-pencil'"
                    [styleClass]="'p-button-rounded p-button-text p-button-raised mr-1'"
                    (onClick)="emitEditAction(person)">
          </p-button>
          <p-button [icon]="'pi pi-download'"
                    [styleClass]="'p-button-rounded p-button-text p-button-raised  mr-1'"
                    [disabled]="true">
          </p-button>
          <p-button [icon]="'pi pi-trash'"
                    [styleClass]="'p-button-rounded p-button-text p-button-raised'"
                    [disabled]="true">
          </p-button>
        </td>
      </tr>
    </ng-template>
    <ng-template pTemplate="emptymessage">
      <tr>
        <td colspan="7" i18n>Keine Ergebnisse vorhanden.</td>
      </tr>
    </ng-template>
  </p-table>
</p-panel>
